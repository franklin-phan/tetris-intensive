(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],{13:function(e,t,n){e.exports=n(25)},18:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(5),o=n.n(c),u=(n(18),n(3)),i=n(1),l=n(2),s=n(12),m=function(){for(var e=[],t=0;t<18;t++){e.push([]);for(var n=0;n<10;n++)e[t].push(0)}return e},f=[[[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]],[[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]],[[[0,0,0,0],[1,1,1,0],[0,1,0,0],[0,0,0,0]],[[0,1,0,0],[1,1,0,0],[0,1,0,0],[0,0,0,0]],[[0,1,0,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,1,0],[0,1,0,0],[0,0,0,0]]],[[[0,0,0,0],[1,1,1,0],[1,0,0,0],[0,0,0,0]],[[1,1,0,0],[0,1,0,0],[0,1,0,0],[0,0,0,0]],[[0,0,1,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,1,0],[0,0,0,0]]],[[[1,0,0,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,1,0],[0,1,0,0],[0,1,0,0],[0,0,0,0]],[[0,0,0,0],[1,1,1,0],[0,0,1,0],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[1,1,0,0],[0,0,0,0]]],[[[0,0,0,0],[1,1,0,0],[0,1,1,0],[0,0,0,0]],[[0,0,1,0],[0,1,1,0],[0,1,0,0],[0,0,0,0]]],[[[0,0,0,0],[0,1,1,0],[1,1,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,1,0],[0,0,1,0],[0,0,0,0]]],[[[0,1,1,0],[0,1,1,0],[0,0,0,0],[0,0,0,0]]]],E=function(){return e=1,t=f.length-1,Math.floor(Math.random()*(t-e+1))+e;var e,t},b=function(){return{grid:m(),shape:E(),rotation:0,x:5,y:-4,nextShape:E(),isRunning:!0,score:0,speed:1e3,gameOver:!1}},O=function(e,t){return(t+1)%f[e].length},d=function(e,t,n,r,a){for(var c=f[e][a],o=0;o<c.length;o++)for(var u=0;u<c[o].length;u++)if(0!==c[o][u]){var i=u+n,l=o+r;if(l<0)continue;var s=t[l];if(!s)return!1;if(void 0===s[i]||0!==s[i])return!1}return!0},v=function(e,t,n,r,a){for(var c=!1,o=f[e][a],u=Object(s.a)(t),i=0;i<o.length;i++)for(var l=0;l<o[i].length;l++){if(o[i][l])i+r<0?c=!0:u[i+r][l+n]=e}return{grid:u,gameOver:c}},g=function(e){for(var t=0,n=0;n<e.length;n++)-1===e[n].indexOf(0)&&(t+=1,e.splice(n,1),e.unshift(Array(10).fill(0)));return[0,40,100,300,1200][t]},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b(),t=arguments.length>1?arguments[1]:void 0,n=e.shape,r=e.grid,a=e.x,c=e.y,o=e.rotation,u=e.nextShape,i=e.score,s=e.isRunning;switch(t.type){case"ROTATE":var m=O(n,o);return d(n,r,a,c,m)?Object(l.a)(Object(l.a)({},e),{},{rotation:m}):e;case"MOVE_RIGHT":return d(n,r,a+1,c,o)?Object(l.a)(Object(l.a)({},e),{},{x:a+1}):e;case"MOVE_LEFT":return d(n,r,a-1,c,o)?Object(l.a)(Object(l.a)({},e),{},{x:a-1}):e;case"MOVE_DOWN":var f=c+1;if(d(n,r,a,f,o))return Object(l.a)(Object(l.a)({},e),{},{y:f});var E=v(n,r,a,c,o),h=E.grid,p=E.gameOver;if(p){var j=Object(l.a)({},e);return j.shape=0,j.grid=h,Object(l.a)(Object(l.a)({},e),{},{gameOver:!0})}var y=b();return y.grid=h,y.shape=u,y.score=i,y.isRunning=s,y.score=i+g(h),y;case"RESUME":return Object(l.a)(Object(l.a)({},e),{},{isRunning:!0});case"PAUSE":return Object(l.a)(Object(l.a)({},e),{},{isRunning:!1});case"GAME_OVER":return e;case"RESTART":return b();default:return e}},p=Object(u.b)({game:h});n(24);function j(e){var t="grid-square color-".concat(e.color);return a.a.createElement("div",{className:t})}function y(e){var t=Object(r.useRef)(),n=Object(r.useRef)(0),c=Object(r.useRef)(0),o=Object(i.b)(),u=Object(i.c)((function(e){return e.game})),l=u.grid,s=u.shape,m=u.rotation,E=u.x,b=u.y,O=u.isRunning,d=u.speed,v=f[s][m],g=s,h=l.map((function(e,t){return e.map((function(e,n){var r=n-E,c=t-b,o=e;r>=0&&r<v.length&&c>=0&&c<v.length&&(o=0===v[c][r]?o:g);var u=t*l[0].length+n;return a.a.createElement(j,{key:u,color:o})}))})),p=function e(r){if(t.current=requestAnimationFrame(e),O){n.current||(n.current=r);var a=r-n.current;c.current+=a,c.current>d&&(o({type:"MOVE_DOWN"}),c.current=0),n.current=r}};return Object(r.useEffect)((function(){return t.current=requestAnimationFrame(p),function(){return cancelAnimationFrame(t.current)}}),[O]),a.a.createElement("div",{className:"grid-board"},h)}function R(e){var t=Object(i.c)((function(e){return e.game.nextShape})),n=f[t][0].map((function(e,t){return e.map((function(e,n){return a.a.createElement(j,{key:"".concat(t).concat(n),color:e})}))}));return a.a.createElement("div",{className:"next-block"},n)}function N(e){var t=Object(i.b)(),n=Object(i.c)((function(e){return e.game})),r=n.score,c=n.isRunning,o=n.gameOver;return a.a.createElement("div",{className:"score-board"},a.a.createElement("div",null,"Score:",r),a.a.createElement("div",null,"Level: 1"),a.a.createElement("button",{className:"score-board-button",onClick:function(e){o||t(c?{type:"PAUSE"}:{type:"RESUME"})}},c?"Pause":"Play"),a.a.createElement("button",{className:"score-board-button",onClick:function(e){t({type:"RESTART"})}},"Restart"))}var T=n(4),M=n.n(T);function A(e){var t=Object(i.b)(),n=Object(i.c)((function(e){return e.game.isRunning})),r=Object(i.c)((function(e){return e.game.gameOver}));return a.a.createElement("div",{className:"controls"},a.a.createElement(M.a,{handleKeys:["a","left"],onKeyEvent:function(e,a){n&&!r&&t({type:"MOVE_LEFT"})}}),a.a.createElement("button",{disabled:!n||r,className:"control-button",onClick:function(e){n&&!r&&t({type:"MOVE_LEFT"})}},"Left"),a.a.createElement(M.a,{handleKeys:["d","right"],onKeyEvent:function(e,a){n&&!r&&t({type:"MOVE_RIGHT"})}}),a.a.createElement("button",{disabled:!n||r,className:"control-button",onClick:function(e){n&&!r&&t({type:"MOVE_RIGHT"})}},"Right"),a.a.createElement(M.a,{handleKeys:["w","up"],onKeyEvent:function(e,a){n&&!r&&t({type:"ROTATE"})}}),a.a.createElement("button",{disabled:!n||r,className:"control-button",onClick:function(e){n&&!r&&t({type:"ROTATE"})}},"Rotate"),a.a.createElement(M.a,{handleKeys:["s","down"],onKeyEvent:function(e,a){n&&!r&&t({type:"MOVE_DOWN"})}}),a.a.createElement("button",{disabled:!n||r,className:"control-button",onClick:function(e){n&&!r&&t({type:"MOVE_DOWN"})}},"Down"))}function k(e){var t=Object(i.c)((function(e){return e.game.isRunning})),n="",r="hidden";return Object(i.c)((function(e){return e.game.gameOver}))?(n="Game Over",r=""):t||(n="Paused",r=""),a.a.createElement("div",{className:"message-popup ".concat(r)},a.a.createElement("h1",null,n))}var w=Object(u.c)(p);var x=function(){return a.a.createElement(i.a,{store:w},a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement("h1",{className:"App-title"},"Tetris Redux")),a.a.createElement(y,null),a.a.createElement(R,null),a.a.createElement(N,null),a.a.createElement(A,null),a.a.createElement(k,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[13,1,2]]]);
//# sourceMappingURL=main.fcd215ed.chunk.js.map